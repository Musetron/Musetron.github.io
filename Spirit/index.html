<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>Simple Voice Echo</title>
<style>
  body {
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 50px;
  }
  button {
    padding: 10px 20px;
    margin: 10px;
    font-size: 16px;
  }
  p {
    font-weight: bold;
  }
</style>
</head>
<body>
<h1>Sprach-Echo</h1>
<p>Klicke auf Start und sprich ins Mikrofon</p>
<button id="startBtn">Start</button>
<button id="stopBtn" disabled>Stop</button>

<script>
const startBtn = document.getElementById("startBtn");
const stopBtn = document.getElementById("stopBtn");

// Sprachsynthese
const synth = window.speechSynthesis;

// Aufnahme
let recognition;
if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    recognition = new SpeechRecognition();
    recognition.continuous = true;
    recognition.interimResults = false;
    recognition.lang = 'de-DE';

    recognition.onresult = (event) => {
        for (let i = event.resultIndex; i < event.results.length; ++i) {
            if (event.results[i].isFinal) {
                const text = event.results[i][0].transcript;
                console.log("Erkannt:", text);

                // Sprache ausgeben
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'de-DE';
                synth.speak(utterance);
            }
        }
    };

    recognition.onerror = (e) => console.error(e);
} else {
    alert("Dein Browser unterstÃ¼tzt keine Spracherkennung.");
}

// Buttons
startBtn.onclick = () => {
    recognition.start();
    startBtn.disabled = true;
    stopBtn.disabled = false;
};

stopBtn.onclick = () => {
    recognition.stop();
    startBtn.disabled = false;
    stopBtn.disabled = true;
};
</script>
</body>
</html>
